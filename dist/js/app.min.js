var Game=function(){var a="https://handson.eniwine.com.br/api/descubraoassassino/",e={};return{getData:function(o){$.when($.ajax({url:a,type:"GET"}).done(function(a){a=JSON.parse(a),e.misterioId=a.misterioId}),$.ajax({url:`${a}locais`,type:"GET"}).done(function(a){a=JSON.parse(a),e.locais=a}),$.ajax({url:`${a}armas`,type:"GET"}).done(function(a){a=JSON.parse(a),e.armas=a}),$.ajax({url:`${a}criminosos`,type:"GET"}).done(function(a){a=JSON.parse(a),e.suspeitos=a})).then(function(){o()})},sendTeoria:function(o){teoria={IdSuspeito:$(e.s).find(":radio:checked").data("id"),IdArma:$(e.a).find(":radio:checked").data("id"),IdLocal:$(e.l).find(":radio:checked").data("id"),IdMisterio:e.misterioId},$.ajax({url:`${a}`,type:"POST",data:teoria}).done(function(a){a=JSON.parse(a),o(a)})},setup:function(){Game.getData(function(){e.end=!1,e.s=$("#listSuspeitos"),e.a=$("#listArmas"),e.l=$("#listLocais"),e&&(e.suspeitos&&$(e.suspeitos).each((a,i)=>{o(i,e.s,"info")}),e.locais&&$(e.locais).each((a,i)=>{o(i,e.l,"warning")}),e.armas&&$(e.armas).each((a,i)=>{o(i,e.a,"danger")})),$(e.s).find(":radio").change(function(){$("#teoSusp").html(`<p>${this.id}</p>`)}),$(e.l).find(":radio").change(function(){$("#teoLocal").html(`<p>${this.id}</p>`)}),$(e.a).find(":radio").change(function(){$("#teoArma").html(`<p>${this.id}</p>`)}),$("form").submit(a=>{a.preventDefault(),e.end||Game.sendTeoria(function(a){0==a?(e.end=!0,$("#erro").hide().html(""),$(".modal-body").html(`<p>Parabéns! Você ajudou o <b>Inspetor Clouseau</b> a descobrir o crime!<br>\n                  Foi descoberto que <b>Sean Bean</b> foi assassinado por <b>${$("#teoSusp").children().html()}</b> em <b>${$("#teoLocal").children().html()}</b> com um(a) <b>${$("#teoArma").children().html()}</b>!</p>\n                  <p>Gostaria de investigar um novo crime?</p>`),$("#modal").modal()):1==a?$("#erro").hide().html("Suspeito incorreto").fadeIn("slow"):2==a?$("#erro").hide().html("Local incorreto").fadeIn("slow"):$("#erro").hide().html("Arma incorreta").fadeIn("slow")})}),$("#reload").click(()=>{window.location.reload()})})}};function o(a,e,o){$(e).append(`<label class="btn btn-${o} btn-sm">\n        <input type="radio" name="op${e[0].id}" id="${a.Nome}" data-id="${a.Id}" autocomplete="off" required> ${a.Nome}\n      </label>`)}}();Game.setup();